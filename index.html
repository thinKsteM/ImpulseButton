<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>欲ボタン</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app" class="app-container">
        <!-- Views will be injected here or toggled -->

        <!-- HOME VIEW -->
        <div id="view-home" class="view-container">
            <div class="header">
                <h1 class="header-title">欲ボタン</h1>
                <button class="btn-settings">⚙️</button>
            </div>

            <div id="home-content" class="content">
                <!-- Content injected via JS -->
            </div>
        </div>

        <!-- ADD VIEW -->
        <div id="view-add" class="view-container hidden">
            <div class="header">
                <div class="header-actions">
                    <button class="btn btn-ghost btn-icon nav-back">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="m12 19-7-7 7-7" />
                            <path d="M19 12H5" />
                        </svg>
                    </button>
                    <h1 class="header-title" style="font-size: 1.25rem; margin-left: 0.5rem;">新しい欲ボタンを作成</h1>
                </div>
            </div>

            <form id="add-form" class="content">
                <!-- Image Upload -->
                <div class="form-group">
                    <label class="form-label">画像を選択してください<span class="required">*</span></label>
                    <p class="form-hint">なりたくない姿、理想の姿、推しのキャラなど、あなたをサポートする画像を選んでください</p>
                    <div class="image-upload-box" id="image-upload-area">
                        <input type="file" id="input-image" accept="image/*" class="file-input">
                        <div id="upload-placeholder" class="upload-placeholder">
                            <svg class="icon" style="width: 2rem; height: 2rem;" xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" x2="12" y1="3" y2="15" />
                            </svg>
                            <span>タップして画像を選択</span>
                        </div>
                        <img id="image-preview" class="preview-image hidden" src="" alt="Preview">
                    </div>
                    <p id="error-image" class="error-text hidden"></p>
                </div>

                <!-- Name Input -->
                <div class="form-group">
                    <label class="form-label">欲の名前<span class="required">*</span></label>
                    <p class="form-hint">例：食べたい、買いたい、怠けたい、など</p>
                    <input type="text" id="input-name" class="input" placeholder="例：食べたい" maxlength="20">
                    <p id="error-name" class="error-text hidden"></p>
                    <p class="char-count"><span id="count-name">0</span>/20</p>
                </div>

                <!-- Message Input -->
                <div class="form-group">
                    <label class="form-label">応援メッセージ<span class="required">*</span></label>
                    <p class="form-hint">この欲が出たときに見るメッセージを入力してください。</p>
                    <textarea id="input-message" class="textarea" rows="5" placeholder="例：君ならできる！今は我慢の時！"
                        maxlength="200"></textarea>
                    <p id="error-message" class="error-text hidden"></p>
                    <p class="char-count"><span id="count-message">0</span>/200</p>
                </div>

                <div
                    style="margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--border); display: flex; gap: 0.5rem;">
                    <button type="button" class="btn btn-outline nav-back" style="flex:1">キャンセル</button>
                    <button type="submit" class="btn btn-primary" style="flex:1">保存</button>
                </div>
            </form>
        </div>

        <!-- BUTTON FLOW: IMAGE VIEW -->
        <div id="view-button-image" class="view-container view-gradient-bg hidden">
            <!-- Title Overlay -->
            <div style="position: absolute; top: 1.5rem; width: 100%; text-align: center;">
                <p style="font-size: 0.875rem; color: var(--muted-foreground);">あなたの欲が出ています</p>
            </div>

            <!-- Main Image -->
            <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 1rem;">
                <div
                    style="width: 100%; max-width: 320px; aspect-ratio: 1/1; border-radius: 1rem; overflow: hidden; box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25); background-color: var(--secondary);">
                    <img id="flow-image" src="" alt="" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
            </div>

            <!-- Action -->
            <div style="padding: 2rem; width: 100%;">
                <p class="animate-pulse"
                    style="text-align: center; font-size: 0.75rem; color: var(--muted-foreground); margin-bottom: 1rem;">
                    タップして続ける</p>
                <button id="btn-flow-next" class="btn btn-primary"
                    style="width: 100%; padding: 1.5rem; font-size: 1.125rem;">次へ進む</button>
            </div>
        </div>

        <!-- BUTTON FLOW: MESSAGE VIEW -->
        <div id="view-button-message" class="view-container hidden">
            <div class="header">
                <div class="header-actions">
                    <button id="btn-flow-back" class="btn btn-ghost btn-icon">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="m12 19-7-7 7-7" />
                            <path d="M19 12H5" />
                        </svg>
                    </button>
                    <h1 class="header-title" style="font-size: 1.125rem; margin-left: 0.5rem; flex: 1;">この欲について</h1>
                </div>
            </div>

            <div class="content">
                <div style="margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border);">
                    <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">欲の種類</p>
                    <p id="flow-name" style="font-size: 1.5rem; font-weight: 700; color: var(--foreground);"></p>
                </div>

                <div style="margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border);">
                    <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.75rem;">応援メッセージ</p>
                    <div class="message-box">
                        <p id="flow-message" style="color: var(--card-foreground);"></p>
                    </div>
                </div>

                <div style="margin-top: auto;">
                    <p style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.75rem;">この欲に対してどうしますか？</p>
                    <div class="grid-2" style="margin-bottom: 1rem;">
                        <button id="btn-flow-do" class="btn btn-destructive btn-outline" style="padding: 1rem;">
                            やる<br><span style="font-size: 0.75rem; font-weight: normal;">(我慢できない)</span>
                        </button>
                        <button id="btn-flow-dont" class="btn btn-primary" style="padding: 1rem;">
                            やらない<br><span style="font-size: 0.75rem; font-weight: normal;">(我慢する)</span>
                        </button>
                    </div>
                    <button id="btn-flow-home" class="btn btn-ghost" style="width: 100%;">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" style="margin-right: 0.5rem;">
                            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                            <polyline points="9 22 9 12 15 12 15 22" />
                        </svg>
                        ホームに戻る
                    </button>
                </div>
            </div>
        </div>

    </div>
    <script src="app.js"></script>
</body>

</html>